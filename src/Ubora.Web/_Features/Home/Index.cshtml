@using Ubora.Web.Data
@using Ubora.Web._Features.ProjectList
@inject SignInManager<ApplicationUser> SignInManager

@{
    ViewData["Title"] = "Welcome";
}

@if (!SignInManager.IsSignedIn(User))
{
    <div class="jumbotron jumbotron-fluid mb-2 jumbotron-landing">
        <div class="container landing-image-main">
            <div class="text-center">
                <h1>UBORA</h1>
                <p class="lead display-5">The Biomedical engineering open design platform</p>
            </div>
            <div class="text-center mt-5">
                <p class="lead display-5">Create or collaborate open-sourced biomedical solutions.</p>
                <a class="btn btn-primary p-3 btn-cta" role="button" asp-controller="Account" asp-action="Register" asp-route-returnurl="@ViewData["ReturnUrl"]">Sign up now!</a>
            </div>
        </div>
    </div>
}
<div class="container-fluid mb-4">
    <div class="row">
        <div class="col flex-column text-center mr-1 p-5 landing-image-discussion">
            <p class="lead display-5">Have a need for medical solution? Find it through open discussion.</p>
            <a class="btn btn-primary btn-disabled align-self-end js-tooltip" role="button" disabled title="Coming soon!" data-placement="bottom">I have a need</a>
        </div>
        <div class="col flex-column text-center ml-1 p-5 landing-image-solution">

        @if(User.Identity.IsAuthenticated)
        {
            if (await AuthorizationService.IsAuthorizedAsync(User, Policies.CanCreateProject))
            {
                <p class="lead display-5">Have an idea? Propose your biomedical solution.</p>
                <a class="btn btn-primary align-self-end" asp-controller="ProjectCreation" asp-action="Create" role="button">I have an idea</a>
            }
            else
            {
                <p class="lead display-5">Have an idea? Propose your biomedical solution.</p>
                <a class="btn btn-primary btn-disabled align-self-end js-tooltip" role="button" disabled title="Your email must be confirmed to create a project!" data-placement="bottom">I have an idea</a>
            }
        }
        else
        {
            <p class="lead display-5">Have an idea? Propose your biomedical solution.</p>
            <a class="btn btn-primary btn-disabled align-self-end js-tooltip" role="button" disabled title="You have to log in to create a project!" data-placement="bottom">I have an idea</a>
        }
        </div>
    </div>
</div>

<div class="container my-4">
    @await Component.InvokeAsync(typeof(PublicProjectListViewComponent))
</div>
