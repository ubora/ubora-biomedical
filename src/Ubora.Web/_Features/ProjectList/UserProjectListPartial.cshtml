@model Ubora.Web._Features.ProjectList.ProjectListViewModel

<div class="row">
    <div class="col">
        @if (Model.Projects.Any())
        {
            <h2 class="display-4">@Model.Header</h2>
            <div class="row">

                <div class="col-md-4 col-lg-3 my-2">
                    @await Html.PartialAsync("_CreateProjectCardPartial.cshtml")
                </div>

                @foreach (var project in Model.Projects)
                {
                    <div class="col-md-4 col-lg-3 my-2">
                        @await Html.PartialAsync("_ProjectCardPartial.cshtml", model: project)
                    </div>
                }
            </div>
        }
        else if (Model.ShowDefaultMessage)
        {
            <div class="text-center">
                <h2 class="display-4">You have no projects.</h2>
                @if (await AuthorizationService.IsAuthorizedAsync(User, Policies.CanCreateProject))
                {
                    <p>Either <a asp-controller="ProjectCreation" asp-action="Create">create a new one</a> or find projects to join.</p>
                }
                else
                {
                    <p>Your email must be confirmed to create a project!</p>
                }
            </div>

            if (await AuthorizationService.IsAuthorizedAsync(User, Policies.CanCreateProject))
            {
                <div class="row justify-content-center">
                    <div class="col-md-4 col-lg-3 my-2">
                        @await Html.PartialAsync("_CreateProjectCardPartial.cshtml")
                    </div>
                </div>
            }
        }
    </div>
</div>