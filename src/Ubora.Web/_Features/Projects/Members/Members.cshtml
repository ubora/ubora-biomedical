@using Ubora.Web.Data
@using Ubora.Web._Features.Projects._Shared
@model Ubora.Web._Features.Projects.Members.ProjectMemberListViewModel

@{
    ViewData["Title"] = "Members";
    ViewData["MenuOption"] = ProjectMenuOption.Members;

    var isAdmin = User.IsInRole(ApplicationRole.Admin);
  }

<div class="container my-4">
    <div class="row">
        <div class="col-lg-5">
            <h1>Project members</h1>
        </div>
        <div class="col-lg-7 d-flex justify-content-end">
            @if (Model.IsProjectMember)
            {
                <a class="btn btn-secondary-ghost align-self-start d-sm-block d-lg-inline-block" asp-controller="Members" asp-action="Invite">
                    <i class="material-icons">person_add</i>
                    <span>Invite member</span>
                </a>
            }

            @if (isAdmin)
            {
                <a class="btn btn-secondary-ghost align-self-start d-sm-block d-lg-inline-block ml-1" asp-controller="InviteMentors" asp-action="InviteMentors">
                    <i class="material-icons" id="MentorInviteButton">person_add</i>
                    <span>Add mentor</span>
                </a>
            }
        </div>
    </div>
    <div class="row">
        
                @foreach (var member in Model.Members)
                {
                    <div class="col-sm-12 col-md-4 col-lg-3 my-2">
                        <div class="card text-center box-shadow">
                            <div class="justify-content-center">
                                <img class="card-img-top mt-4 avatar" alt="@member.FullName profile picture">
                            </div>
                            <div class="card-body">
                                <h4 class="card-title">@Html.ActionLink(member.FullName, "ViewProfile", "Profile", new { userId = member.UserId }, new { @class = "user-card--name" })</h4>
                                @if (member.IsProjectLeader)
                                {
                                    <p>Project leader&nbsp;</p>
                                }
                                @if (member.IsProjectMentor)
                                {
                                    <p>Project mentor&nbsp;</p>
                                }
                                
                            </div>
                        </div>
                    </div>



                    @*<li class="list-group-item">
                        <div class="col-sm-1 d-flex justify-content-center">
                            @if (member.IsProjectLeader)
                            {
                                <i class="material-icons" title="Project leader">supervisor_account</i>
                            }
                            @if (member.IsProjectMentor)
                            {
                                <i class="material-icons" title="Project mentor">school</i>
                            }
                        </div>
                        <div class="col text-center">
                            <a asp-controller="Profile" asp-action="ViewProfile" asp-route-userId="@member.UserId">@member.FullName</a>
                        </div>
                        <div class="col-sm-1 d-flex justify-content-center">
                            @{
                                var isRemoveMemberButtonVisible = Model.CanRemoveProjectMembers && !member.IsProjectLeader;
                            }
                            @if (isRemoveMemberButtonVisible)
                            {
                                <a title="Remove member" asp-controller="Members" asp-action="RemoveMember" asp-route-memberId="@member.UserId">
                                    <i class="material-icons">close</i>
                                </a>
                            }
                            @if (member.IsCurrentUser && !Model.IsProjectLeader)
                            {
                                <a title="Leave project" asp-controller="Members" asp-action="Leave" asp-route-memberId="Model.UserId">
                                    <i class="material-icons">exit_to_app</i>
                                </a>
                            }
                        </div>
                    </li>*@



                    }
          
    </div>
</div>
   
