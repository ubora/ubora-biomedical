@using Ubora.Web._Features.Projects._Shared
@model Ubora.Web._Features.Projects.Assignments.AssignmentListViewModel

@{
    ViewData["Title"] = "Assignments";
    ViewData["MenuOption"] = ProjectMenuOption.Assignments;
}

<div class="container-fluid my-4">
  <div class="row justify-content-center">
    <div class="col-sm-12 col-lg-8">

      <div class="row">
        <div class="col-sm-12 col-lg-9">
          <h1 class="display-4">@Model.ProjectName</h1>
        </div>
        <div class="col-sm-12 col-lg-3 d-flex justify-content-end">
          <a class="btn btn-secondary-ghost align-self-start" asp-controller="Assignments" asp-action="Add" asp-route-projectId="@Model.ProjectId">
            <i class="material-icons">add</i>
            <span>Add assignment</span>
          </a>
        </div>
      </div>

      <div class="row my-4">
        <div class="col">

            @foreach (var assignment in Model.Assignments)
            {
                <label class="custom-control custom-checkbox d-block">
                  <input id="@assignment.Id" type="checkbox" class="js-assignment-checkbox custom-control-input"/>
                  <span class="custom-control-indicator"></span>
                  <span class="custom-control-description"><a asp-controller="Assignments" asp-action="Edit" asp-route-id="@assignment.Id">@assignment.Title</a></span>
                </label>
            }

        </div>
      </div>

    </div>
  </div>
</div>


<script>

$('.js-assignment-checkbox').click(function(e) {
  var assignmentStates = JSON.parse(window.localStorage.assignmentStates || "{}");
  assignmentStates[this.id] = this.checked;
  window.localStorage.assignmentStates = JSON.stringify(assignmentStates);
});

$( document ).ready(function() {
  var assignmentStates = JSON.parse(window.localStorage.assignmentStates || "{}");
  $('.js-assignment-checkbox').each(function() {
    this.checked = assignmentStates[this.id];
  })
});

</script>
